package script;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;

import org.uma.jmetal.solution.impl.DefaultIntegerDoubleSolution;

import com.google.gson.Gson;
import com.zioabm.beans.CalibrationConfig;
import com.zioabm.beans.SimulationResult;

import model.ModelDefinition;
import model.ModelRunner;
import problem.MWomABMProblem;
import util.exception.calibration.CalibrationException;
import util.io.CSVFileUtils;
import util.io.StatisticsRecordingBean;
import util.statistics.MonteCarloStatistics;

public class ExporSolutionOutput {

	public static void main(String[] args) throws IOException, CalibrationException {
		String jsonFile = args[0];
		
		//Read the JSON file
		BufferedReader br = new BufferedReader(new FileReader(jsonFile));
		
		StringBuilder buffer = new StringBuilder();
		String line;
		while((line = br.readLine())!=null) {
			buffer.append(line);
		}
		br.close();
		
		
		
		String config = CSVFileUtils.readFile(jsonFile);
		
		//Get ModelDefinition
		Gson gson = new Gson();
		
		CalibrationConfig calibrationConfig = gson.fromJson(config, 
				CalibrationConfig.class);
		
//		SimpleABMProblem sproblem = new SimpleABMProblem(calibrationConfig);
		
//		DefaultDoubleSolution solution = new DefaultDoubleSolution(sproblem);
		
		MWomABMProblem sproblem = new MWomABMProblem(calibrationConfig);
		
		DefaultIntegerDoubleSolution solution = new DefaultIntegerDoubleSolution(sproblem);
		
//		//Solution XXX TPO BEST AW :: 19.775934 30.700424
//		
//		// 2
//		double [] values = {
//				1.7645886564105495E-4, 0.0028521287580400897, 0.08689271545441872, 
//				0.5826696234204085, 0.00221113877587627, 0.5087454353149589, 
//				0.011898810953257946, 0.34637740830829644, 0.033406751828470534, 
//				0.9500686895991266, 0.6377533088995244, 0.5876673013887669, 
//				0.5149266775955833, 0.714730433291215, 0.6050860201794206, 
//				0.5942586598460369, 0.3522146863800331, 0.2839718076647725, 
//				0.05803002634059004, 0.026086696686524413, 0.3775469040357811, 
//				0.26952172131818375, 0.012738975009317255, 0.01036248804318836
//				};
//		solution.setVariableValue(0, 2);
		
		//Solution XXX TPO BEST TRADEOFF :: 22.57807837253586 26.273516149181887 
		
//		double [] values = {
//				9.444115216341602E-4, 0.009605074891365068, 0.3583084979554933, 
//				0.5088329742275647, 0.001133376688393376, 0.6036279328542473, 
//				0.03873028306369155, 0.9359784604650407, 0.385518837576682,
//				0.8459086568066723, 0.7743446599652405, 0.28071298917840576, 
//				0.2788855059353222, 0.6098376058317592, 0.8057196585813153, 
//				0.8702220226909381, 0.32756977723684066, 0.4518349671876113,
//				0.005419521411514722, 0.05570843440927899, 0.43257761775487724, 
//				0.3063791916088129, 0.027198191128642378, 0.028073070349303827
//				};
//		solution.setVariableValue(0, 2);
		
		//###########################################################################
		// TODO SPEA2
		//###########################################################################
		
		//Solution XXX TPO BEST WOM :: 130.313263 18.034309
		
		// 2
//		double [] values = {
//				0.027835076167124457, 0.292999178264902, 0.9613320180064243, 
//				0.6431023899404407, 0.5792780521530978, 0.33031778762426295, 
//				0.5541269739570104, 0.5247619628838144, 0.8941989262608329, 
//				0.8377989282488315, 0.5349470227909875, 0.48836968783265666, 
//				0.5121378716292676, 0.2996821408165118, 0.2327274392852809, 
//				0.7419794326695583, 0.6379115795742794, 0.08748886307279297, 
//				0.2925087984597495, 0.6000007117898483, 0.6669135427212642, 
//				0.21574154125463796, 0.6341900250026044, 0.1271283286027054
//				};
//		solution.setVariableValue(0, 2);
		
		//Solution XXX TP25 BEST AW :: 40.89153546723023 42.480386668094916
		
//		double [] values = {
//				1.7456519282970685E-5, 0.002068877605825637, 0.823130261123245,
//				0.1401288084639957, 0.0027263749025814637, 0.6456615590248918,
//				0.005649486429654812, 0.3850227304724179, 0.9108816039885396,
//				0.8526436105716446, 0.8257678175103218, 0.09154674684602379, 
//				0.5299862806480878, 0.21848574855689007, 0.5887041817826191, 
//				0.5262834005163674, 0.823310099859226, 0.9718006348357064, 
//				0.2974647133474601, 0.5612140018467134, 0.5807142774910826, 
//				0.2608990294518567, 0.06202287438413413, 0.1873414626034196, 
//				0.009278918724555996, 0.11864946957475273, 0.7097118554079274, 
//				3.461454027298068E-4, 0.5452517348191278, 0.24176049226067, 
//				6.817271080912651E-4, 0.26104436073494997, 0.06561039478534711, 
//				0.156958962534834, 0.551733091055205, 0.8799609148631591, 7.144486198262564E-4, 
//				0.035389816036777016, 0.28629418805811535, 0.32338681346928466, 
//				0.09735845244781768, 0.18658439865003523, 0.0017016093479904825,
//				0.8548923177278052, 0.7369602439984059, 0.7120857091001921, 
//				0.4067633986818406, 0.8444316214307792, 0.8799040911966172, 
//				0.44393350461325537, 0.10456082780295495, 0.0024507305255355412, 
//				0.48963520872347877, 0.9381132884465692, 0.06688553667209435, 
//				0.22740083588469334, 0.806365391451399, 0.0011441110506415705, 
//				0.5267864270392459, 0.06643959593254836, 5.925340206401119E-5, 
//				0.6200026145610615, 0.01020149840996279, 7.531269410268941E-4, 
//				0.5428832613094717, 0.5813122685676273, 0.11607793571391521, 
//				0.5511147472317391, 0.09974249943807278, 0.9023316634722682, 
//				0.8260201607097911, 0.37221017017030306, 1.3853447246476073E-4, 
//				0.7845190533156942, 0.059211018674000554, 0.001361056348165122, 
//				0.43487981853635804, 0.7766909368081126, 1.0735111438112386E-4, 0.4916203659478782, 
//				0.02229691785183833, 0.694066908262585, 0.9862590885399927, 
//				0.7830182629103241, 0.005845815520183438, 0.9188672944895561, 
//				0.7029677538388382, 0.6465904220630694, 0.2637152327861824, 
//				0.42106756432411563, 0.27644057377918163, 0.5409999333615643, 
//				0.28358711587384205, 6.613580260755522E-4, 0.039315051860826886, 
//				0.7731677581690258, 0.05711748503292659, 0.6679704940091434, 0.3271722476585545 
//				};
//		solution.setVariableValue(0, 2);
		
		//Solution XXX TP25 BEST WOM :: 248.27827540153038 24.477485988068533
		
//		double [] values = {
//				0.001357619908999965, 0.004489162328300455, 0.9984254943707545, 
//				0.8527713872617132, 0.003383698121445559, 0.008038783440079097, 
//				0.0026854148371276004, 0.40236300844086437, 0.04819959254057942, 
//				0.4917611595639797, 0.9947468355611976, 0.43276695903829404, 
//				0.6781838978106097, 0.7097596624625638, 0.7086058847615434, 
//				0.17033644781811402, 0.503635972515499, 0.16709044833604172, 
//				0.08779246740035085, 0.768788669770558, 0.23893367737823462, 
//				0.22385683373031237, 0.20254048183616444, 0.11655500336627299, 
//				0.008228985385458834, 0.2794120814869225, 0.5022584964709869, 
//				3.4249318177470946E-4, 0.5917898540432555, 0.589815620296521, 
//				0.8886936013040783, 0.5248159936529778, 0.6467651690540652, 
//				1.3520947591443957E-4, 0.26495754514796094, 0.3373638056892119, 
//				0.006731775728851555, 0.41853371156533176, 0.26628743304513725, 
//				9.646028696929748E-4, 0.9474976584756963, 0.3721089714123059, 
//				0.001320377098019868, 0.7858812035241327, 0.6969517247883705, 
//				0.35478429148797086, 0.5772181645639601, 0.5984262216121722, 
//				0.08029656533335347, 0.5026614396046216, 0.03854918553592075, 
//				2.097664905516336E-4, 0.16490396694792953, 0.33299401698132486, 
//				0.05714509899111507, 0.166173595056085, 0.7274779686339372, 
//				0.0013186116122974384, 0.7006049184214298, 0.07195551339732291, 
//				0.06369908456901577, 0.6034304257027238, 0.691442563037427, 
//				2.9616879360040704E-4, 0.8860771889189097, 0.3076568512674128,
//				0.15808036961519395, 0.5496031974102388, 0.4322352849012395, 
//				0.03940591901257012, 0.981251651541784, 0.45316450023055155, 
//				4.158986825122817E-4, 0.13809937150129895, 0.46048564276277143, 
//				0.5244905659901249, 0.7965711270877086, 0.5333502921273958,
//				9.578592267479456E-5, 0.8845116162362897, 0.3606453334772167, 
//				0.38263308798590073, 0.051531080018884304, 0.027320408441164207, 
//				0.12934315206334157, 0.39769685150201295, 0.5367327340680639,
//				0.9344463528822778, 0.5241544909489755, 0.385469491761661,
//				0.0013536232455588929, 0.887387354201129, 0.0028415320607127897, 
//				0.011568286137200462, 0.614312087119111, 0.1881734179244075, 
//				0.037229115596351954, 0.51382131620415, 0.1374902558393411
//				};
//		solution.setVariableValue(0, 2);
		
		//Solution XXX TP25 BEST TRADEOFF :: 42.35993561069296 38.84105657823115
		
//		double [] values = {
//				7.7839361644439E-4, 0.0033804711262764397, 0.861870590123482, 
//				0.580075686041028, 0.0015208360346369407, 0.4568822926513811, 
//				0.008412794484055106, 0.37363072751301557, 0.9327807402679772, 
//				0.9094685790352173, 0.8735400488981061, 0.24572343238825783, 
//				0.6233138530978589, 0.13452365409557668, 0.5881635514308983, 
//				0.5210898952540859, 0.7342421688723312, 0.9548070137649602, 
//				0.3152610313731275, 0.7420177856863582, 0.6292083377845148, 
//				0.27007917726919517, 0.06174368653135746, 0.16645072852697737, 
//				0.006925260067102531, 0.20384821312689252, 0.5358490052681736, 
//				8.361209027484341E-5, 0.10871338955897358, 0.2535591701815715, 
//				0.06812843403761906, 0.24390231611690527, 0.16147499731715612, 
//				0.025886398319026352, 0.6264337800493307, 0.7817048296811832, 
//				5.11107803176183E-4, 0.13207401469513358, 0.29017949972321555,
//				0.3001695911424272, 0.09460890712934407, 0.1361072291207331, 
//				0.0010074595298881638, 0.40266334245758423, 0.5641777671178121, 
//				0.9323410811482478, 0.38878546008573556, 0.9179549767825845, 
//				0.8669350949876351, 0.445316209729, 0.2728705724856024, 
//				0.0019651947816335417, 0.49112715595918105, 0.9524737132003542, 
//				0.1783594363380773, 0.1296108478581118, 0.800948908193521, 
//				0.0017880533867883361, 0.46782406701435436, 0.0942398399439848, 
//				2.2280672331733342E-4, 0.4907431192139698, 0.402205522884188, 
//				6.755038033174248E-4, 0.9136637848105619, 0.7336687235116447, 
//				0.06205838468608206, 0.2830501402232187, 0.3945901992763546, 
//				0.981230624374932, 0.9157693592151972, 0.29209807473182425, 
//				4.2238698254016063E-4, 0.7266079528326121, 0.1985082676936183, 
//				4.1973279003649014E-4, 0.2283973443695506, 0.685967603338591, 
//				3.498658952618707E-4, 0.45072280385962327, 0.1316095701246236, 
//				0.05106763622453875, 0.7357792746324118, 0.9880861334138987, 
//				0.005430992533314695, 0.9182554749405119, 0.8358171204009414, 
//				0.7760092893965916, 0.20680953037931338, 0.29374637538990095,
//				0.8356055860382989, 0.5065486392437122, 0.27185045261547575, 
//				2.773388611427783E-4, 0.19005659609905917, 0.9199221796348236, 
//				0.26945115130077135, 0.665992537864854, 0.38508559506549844 
//				};
//		solution.setVariableValue(0, 2);

		//###########################################################################
		// TODO NSGAII
		//###########################################################################
		
		//Solution XXX TP0 BEST AW :: 22.234563788461294 30.126647132383372
		
//		double [] values = {
//				0.045853422781430175, 0.029789122521459065, 0.7975440849686568,
//				0.31100143317927187, 0.6740383896927071, 0.7374845462593562, 
//				0.21958730065369575, 0.24147536177996387, 0.4158939305364569, 
//				0.2444285700682517, 0.011741559411268337, 0.46866500925285415, 
//				0.7770846713251014, 0.3643022724365758, 0.6347901643268576, 
//				0.2714966927926404, 0.9639647331927301, 0.15436847496148498, 
//				0.420393823955678, 0.3638468371810911, 0.8007035564961573, 
//				0.3285789728616585, 0.28841882678626096, 0.21391420968125976 
//				};
//		solution.setVariableValue(0, 2);
		
		//Solution XXX TP0 BEST TradeOff :: 27.419758949776927 24.323094836364064
		
//		double [] values = {
//				0.038021111623407475, 0.05523199781595252, 0.7945085161914722, 
//				0.8067784974985117, 0.04947509627196811, 0.9770536388069205, 
//				0.19046827188193005, 0.584000772746537, 0.45408000393907055, 
//				0.4130305709070108, 0.014893832040410837, 0.47405256516641353, 
//				0.8820326028299686, 0.4749248128668935, 0.6865708144014282, 
//				0.3889457128590543, 0.9932855631599866, 0.3992016321110621, 
//				0.5263385419940707, 0.4945003418635356, 0.422936935920461, 
//				0.3383764780564189, 0.2676707814503487, 0.20542595075250258 
//				};
//		solution.setVariableValue(0, 2);
		
		//Solution XXX TP0 BEST WOM :: 139.7627518796836 18.17411713139947
		
//		double [] values = {
//				0.04076650724505282 , 0.009200080208548504 , 0.5372255130958078 , 
//				0.5204860963785338 , 0.5766384679069398 , 0.7481351247471704 , 
//				0.6340286495713906 , 0.24586429482992836 , 0.12498727159055645 , 
//				0.27117841953502503 , 0.6755588769266418 , 0.5327678671533788 , 
//				0.6523604958851623 , 0.37999085946635786 , 0.634889908077498 , 
//				0.2756698697982027 , 0.9434180639022578 , 0.058805006877066246 , 
//				0.4054760600642437 , 0.36713560979511883 , 0.8000113592576618 , 
//				0.22207232192548806 , 0.9550609320081762 , 0.16424064870352714
//				};
//		solution.setVariableValue(0, 2);
		
		//Solution XXX TP25 BEST AW :: 46.53892423212185 49.4570074497573

//		double [] values = {
//				0.04988337585726746 , 0.07340614329688233 , 0.8628009820059319 , 
//				0.2511896954765509 , 0.18357378323440046 , 0.1290715320654221 , 
//				0.4181339982204302 , 0.3720370452699524 , 0.21779731191644042 , 
//				0.8263025829312445 , 0.927661281879708 , 0.25748147439250224 , 
//				0.4464430859268296 , 0.5376638424803112 , 0.25766731424332034 , 
//				0.7938287325762273 , 0.5314181618355458 , 0.8502792940101389 , 
//				0.4359283328583786 , 0.6106858446868311 , 0.5253266070424677 , 
//				0.20628224775054627 , 0.07607048346334813 , 0.46367667043614197 , 
//				0.5742962004424682 , 0.10287173731184171 , 0.8087266906241335 , 
//				0.010897703251193065 , 0.2313468733881054 , 0.156691968860105 , 
//				0.6509519543344806 , 0.19562182370281103 , 0.4509462531158348 , 
//				0.02923063208192798 , 0.04137983049299854 , 0.9325519677364074 , 
//				0.18248525716146224 , 0.5068801584275958 , 0.6762817241500441 , 
//				0.9641097951001025 , 0.7677841122594296 , 0.303405954590403 , 
//				0.2380442578145039 , 0.556863121387539 , 0.6049894299225297 , 
//				0.7285489872787793 , 0.3638590841792084 , 0.6341804990654178 , 
//				0.4340545960639975 , 0.23599716760842646 , 0.5194575173583063 , 
//				0.027654745403914785 , 0.8961646371038741 , 0.8269384301204896 , 
//				0.42873700875139475 , 0.8897098369552169 , 0.7888923396437998 , 
//				0.7071791986118092 , 0.7914962310789337 , 0.3742673550274671 , 
//				0.15489895977976237 , 0.786414080999507 , 0.8775423857183916 , 
//				0.7077523580805023 , 0.44439006752014126 , 0.14265000616158938 , 
//				0.39366543751162925 , 0.1599406510884318 , 0.9326618382895825 , 
//				0.17972919242104532 , 0.8798544922823028 , 0.18069378185231905 , 
//				0.004308739865839382 , 0.9837617922936664 , 0.3960440917701063 , 
//				0.39736215341362485 , 0.42406005995941126 , 0.4982590934894251 , 
//				3.301877375208005E-4 , 0.5353792886612592 , 0.42193954535846995 , 
//				0.7303271115046155 , 0.8296817707974491 , 0.9625656030303921 , 
//				0.6332851038027547 , 0.43102081991622293 , 0.9629937679331961 , 
//				0.6241318133535511 , 0.11816127338675925 , 0.947871460113802 , 
//				0.6672953712252112 , 0.24796871531762693 , 0.3331208186542033 , 
//				0.10126754266903723 , 0.7138421289382996 , 0.5120618852710735 , 
//				0.036922965010665554 , 0.11131866991475592 , 0.3070113268906167
//				};
//		solution.setVariableValue(0, 2);
		
		//Solution XXX TP25 BEST TradeOff :: 56.10476451503533 38.39469565371002

//		double [] values = {
//				0.0013278593592304794 , 0.07949728634382339 , 0.19035051423160365 , 
//				0.7607177598078746 , 0.07563327000042833 , 0.06768668007781399 , 
//				0.41712358145621803 , 0.3018376038624865 , 0.6990799383594062 , 
//				0.08879692962320335 , 0.9530353766234614 , 0.1955650710479683 , 
//				0.7529312264236337 , 0.6561270206699077 , 0.1539119903471168 , 
//				0.8138955816646023 , 0.5958446139329461 , 0.8386372231755503 , 
//				0.4642346053393072 , 0.48031425589607457 , 0.49487952245886846 , 
//				0.21442690873395254 , 0.15040439569432557 , 0.2397682099020021 , 
//				0.5254915840263849 , 0.2690369130770183 , 0.11131709347748092 , 
//				0.0067515425512170765 , 0.09944801814728749 , 0.7916832350559542 , 
//				0.8015374077125241 , 0.20213698929039559 , 0.5220945858997257 , 
//				0.06033663976311843 , 0.07350906789986361 , 0.6666215735762036 , 
//				0.07901825173352331 , 0.40453186760225124 , 0.5612092366665429 , 
//				0.9652023152791254 , 0.9516324578917437 , 0.5332711795891016 , 
//				0.05913707527039187 , 0.8389907308763809 , 0.23100075091182012 , 
//				0.6688305208727636 , 0.31470314929800614 , 0.5625653142421041 , 
//				0.4494568296345266 , 0.23026119476969592 , 0.6751132523197049 , 
//				0.013242279292052742 , 0.9734644798463936 , 0.8269545770905431 , 
//				0.483969790913876 , 0.9606130067611848 , 0.7584051554454471 , 
//				0.7394684034225626 , 0.323042284682813 , 0.24173043596457627 , 
//				0.12006215250355542 , 0.8420366937647771 , 0.7319561490936113 , 
//				0.8606342597814821 , 0.5454748551944003 , 0.1568043073231588 , 
//				0.4141720061840842 , 0.14160264988344398 , 0.5577063901177328 , 
//				0.11135901622721603 , 0.914786977586203 , 0.23662990544960313 , 
//				0.006524656811525166 , 0.9233693329754393 , 0.36536555998136055 , 
//				0.18147433608864763 , 0.18107772001717812 , 0.4759707856142321 , 
//				0.035237052689506984 , 0.588457261900933 , 0.5188000916859864 , 
//				0.36139581160309364 , 0.5188110578087345 , 0.5858610776108502 , 
//				0.563400349330834 , 0.4326093325594247 , 0.9593780449554867 , 
//				0.3684728996452391 , 0.3223920344412057 , 0.1534640989141036 , 
//				0.5501217054090791 , 0.14424222806739184 , 0.8372651039261249 , 
//				0.020202697017349735 , 0.10617046983892381 , 0.4324110302368338 , 
//				0.7964024423124726 , 0.3342378239843059 , 0.37705821172657505 
//				};
//		solution.setVariableValue(0, 2);
		
		
		//Solution XXX TP25 BEST WOM :: 322.4322009530594 26.156833734617784

//		double [] values = {
//				0.021095207667984502 , 0.04478312747314164 , 0.17198812684977938 , 
//				0.09387827981916139 , 0.07173773233500139 , 0.13737273700716263 , 
//				0.16157429826472983 , 0.340894315346974 , 0.19052847985358284 , 
//				0.7454931070449726 , 0.8459965331185662 , 0.04581981816909858 , 
//				0.8388945850821264 , 0.4743091389215256 , 0.18035280064649256 , 
//				0.2652775640340813 , 0.5974523712121413 , 0.22615992775969931 , 
//				0.5373475615379844 , 0.8670872688508606 , 0.40891343865322793 , 
//				0.20761222635471271 , 0.6977699289094503 , 0.2529660316707672 , 
//				0.5254897027310305 , 0.2515678150823797 , 0.896514390264583 , 
//				0.009967761690083548 , 0.12741638652983167 , 0.11183668789711237 , 
//				0.813788402046599 , 0.20792877418311081 , 0.5549921174771008 , 
//				0.047244267731993084 , 0.10302644368742057 , 0.18487526248804814 , 
//				0.023235360447306633 , 0.45276821879471124 , 0.5267557856452673 , 
//				0.7562151854801741 , 0.4877468269274194 , 0.8788756110352988 , 
//				0.03138096417379178 , 0.8549302877246296 , 0.6132960979458179 , 
//				0.6611397721177672 , 0.31537126249756253 , 0.7134312506425783 , 
//				0.13045141917760666 , 0.06678724551023069 , 0.7697093576597037 , 
//				0.007435416513829379 , 0.08217422168962368 , 0.5267619780366141 , 
//				0.4921495691776632 , 0.7726336082046082 , 0.9610089397046222 , 
//				0.5314218054280417 , 0.8324814894326211 , 0.27344491735163484 , 
//				0.30143494643501717 , 0.92551573247075 , 0.9080970981661234 , 
//				0.8766509267916434 , 0.4535406558156394 , 0.13118774990574666 , 
//				0.4832405407057542 , 0.1329002204676169 , 0.9899218293279851 , 
//				0.05761016496277234 , 0.9131119414994133 , 0.15854753283690975 , 
//				0.005418544812178541 , 0.7547155345720329 , 0.3001422750932386 , 
//				0.4647722018067166 , 0.2870010364925335 , 0.4524327308312607 , 
//				0.005186795309388122 , 0.6107683689618398 , 0.416024377373976 , 
//				0.324213553368675 , 0.506241698098545 , 0.8410936719325827 , 
//				0.6356675839884511 , 0.4638329485407551 , 0.2767982411325258 , 
//				0.33710412631675823 , 0.9665961814450527 , 0.3388743049958849 , 
//				0.016760885762152303 , 0.1422324816187513 , 0.703186072720836 , 
//				0.04410157041702058 , 0.6290237416044172 , 0.17579128853278714 , 
//				0.4930144922822682 , 0.10264985399145454 , 0.3168673511261449 
//				};
//		solution.setVariableValue(0, 2);
		
		
		//Solution XXX TP15 BEST AW :: 37.53420034567808 42.88312450819469
		
//		double [] values = {
//				0.08822588499940497, 0.5824928411170188, 0.07446468223425584, 
//				0.9381296570749001, 0.216313876071382, 0.2758855042209415, 
//				0.5606576599390153, 0.3530184694454024, 0.40195230411802657, 
//				0.569165005422701, 0.171801941365575, 0.5441420893732525, 
//				0.8801262596225474, 0.9208216926846453, 0.09138566766903268, 
//				0.21561377666865703, 0.8382417644319979, 0.3682421978249199, 
//				0.4813897063286931, 0.655993998439373, 0.7114706944454554, 
//				0.28628542450962297, 0.03436716018815257, 0.18933566821235456, 
//				0.5536284458506062, 0.45946947411469596, 0.7031806198077555, 
//				0.25001650764879524, 0.7429778325189919, 0.08022692440595298, 
//				0.8765453121216238, 0.6060858850473145, 0.399173108989941, 
//				0.7786909449932422, 0.7535293087762271, 0.7074539655461622, 
//				0.00809403291739607, 0.12056470030265298, 0.7719692741189773, 
//				0.32889785954115053, 0.6176909365748706, 0.2823947833941368, 
//				0.003559743658062958, 0.8407912543179226, 0.4437712973131109, 
//				0.805161638634863, 0.1295751712721931, 0.352318941476675, 
//				0.4547296808912907, 0.31868717390360646, 0.2387888548503024, 
//				0.08436445604877071, 0.9209382547041951, 0.06807120178450826, 
//				0.08226524223449283, 0.08907164634652635, 0.6742025644207641, 
//				0.0873607659378075, 0.32673290782146264, 0.4540372527895113, 
//				0.7912849000609607, 0.591167352049951, 0.8883184470315002, 
//				0.0019304930485024656, 0.8102893450667235, 0.09955157641730855, 
//				0.39306780682029896, 0.8101557347364093, 0.18722914378289884
//				};
//		solution.setVariableValue(0, 2);
		
		//Solution XXX TP15 BEST TradeOff :: 41.98000041613917 37.76598201358219
		
//		double [] values = {
//				0.07850935374197371, 0.38277531742275395, 0.16276498672564488, 
//				0.9235988775809142, 0.21153748061786992, 0.2794435643009415, 
//				0.5798899204965635, 0.762191593442338, 0.40507131319386747, 
//				0.40906431109509356, 0.1662344784803589, 0.4178081272306961, 
//				0.98959466566565, 0.9454126235731828, 0.10854284356146954, 
//				0.08683988857358242, 0.060080454071108236, 0.2654406411796293, 
//				0.5133696442239664, 0.6451209758037663, 0.7117078206845265, 
//				0.2948580277524667, 0.08158439915836799, 0.18411625692412015, 
//				0.9676724554668369, 0.45829370999438074, 0.7084880753200897, 
//				0.2580652181699503, 0.5351829275425934, 0.0822148965219559, 
//				0.8762957732186646, 0.6452511637424369, 0.3664458720699704, 
//				0.8262087852735636, 0.7524000788293219, 0.00397887607761091, 
//				0.005041634093733841, 0.11090261400494389, 0.7627488141048138, 
//				0.3267657359474571, 0.4673127851837921, 0.49803850442654635, 
//				0.0035151490732217333, 0.6144733069148797, 0.04945195924992718, 
//				0.8307635256941118, 0.8743824997732178, 0.33397155841077153, 
//				0.4527478437438899, 0.7527203054995208, 0.19560840446552485, 
//				0.08578546496945358, 0.9131568996258554, 0.7166609488502128, 
//				0.08890937103603429, 0.25354667496578503, 0.08461107041728666, 
//				0.7478303736603913, 0.26873228204385147, 0.4400571299636554, 
//				0.7300993245942531, 0.02066808459871944, 0.7743706481053262, 
//				0.027327596117179755, 0.1879332744123116, 0.09954664569159583, 
//				0.03344084275101375, 0.9433575429341585, 0.2974700599572781
//				};
//		solution.setVariableValue(0, 2);
				
		//Solution XXX TP15 BEST WOM :: 141.7981982333668 26.184310074581077
		
//		double [] values = {
//				0.05141532345026643, 0.7975181994137955, 0.06196527984810405, 
//				0.7156670945778275, 0.27692464526621796, 0.30275669070905664, 
//				0.7989200443468213, 0.8656423987670057, 0.3785017791470713, 
//				0.34214126351412816, 0.16594932497165296, 0.4512437784718746, 
//				0.12942892086802232, 0.9408239772362414, 0.10518177037961886, 
//				0.20157168151457835, 0.07542420486634066, 0.27519775630770865, 
//				0.09696434027341061, 0.6270156942400423, 0.7086472933634803, 
//				0.2945542664503347, 0.413198488294387, 0.2530321784632496, 
//				0.9230331341732233, 0.26526989678887836, 0.2302933656712246, 
//				0.26971703113650164, 0.6619128628836358, 0.18508233366254395, 
//				0.5547997508900553, 0.1639873508281373, 0.4370164784603451, 
//				0.8030376883163527, 0.3609809506144684, 0.27289761940385404, 
//				0.007707788234886954, 0.0028818178594803567, 0.784337289427324, 
//				0.7618086034516975, 0.2332269838798994, 0.45929543634854775, 
//				0.008281671412966816, 0.7272692797492781, 0.12846331185508175, 
//				0.8042687935051533, 0.333692870333597, 0.3802467975142798, 
//				0.43868941076180906, 0.4475734783362292, 0.19358108806834512, 
//				0.08344254591259044, 0.7641712229877549, 0.1281671630763473, 
//				0.06586468805787687, 0.12044324929764533, 0.5306967372154805, 
//				0.46515463915757566, 0.25178005976122825, 0.43751102397275693, 
//				0.07879359812000336, 0.041006549648011426, 0.9539327261812651, 
//				0.003241041704945184, 0.7345149541250607, 0.09776374221724127, 
//				0.40348020943395235, 0.9227644475223972, 0.2654520873511182
//				};
//		solution.setVariableValue(0, 2);
		
		//Solution XXX TP20 BEST AW :: 33.039452211624855 39.58733282357898
		
//		double [] values = {
//				0.13449735662180204, 0.28262629209749307, 0.9612358790345974, 
//				0.5448828987594575, 0.6443590458367293, 0.2359054746763879, 
//				0.6759613836866363, 0.4605909404534312, 0.4443316549500913, 
//				0.10614296316816901, 0.36542244394088164, 0.07121520596385877, 
//				0.11136641341077784, 0.19587992856255676, 0.3240477011986442, 
//				0.8130060763719966, 0.9079787905117715, 0.9771567369572269, 
//				0.8204901830795447, 0.061587291385225285, 0.7915511413235513, 
//				0.24821874901896318, 0.5041917867389208, 0.4150011887414885, 
//				0.5715697117038698, 0.8559423087063166, 0.49096111496962225, 
//				0.9669114617904586, 0.2918000068629425, 0.5222385414434769, 
//				0.9619606153533957, 0.2839384073267809, 0.3022114016158868, 
//				0.07472090497393447, 0.21227416478642014, 0.4839125323088992, 
//				0.9032486164351973, 0.132157373088649, 0.9200894503313711, 
//				0.1487379239013863, 0.18341550125352962, 0.17118278496145853, 
//				0.07727288023611134, 0.6837476540788355, 0.8558006880096141, 
//				0.678137321852308, 0.9007544356263317, 0.8729600220798549, 
//				0.18327547853864534, 0.26210859402169695, 0.7461847904329241, 
//				0.06826216307858401, 0.7058908171080769, 0.8412787459022685, 
//				0.23093457093779332, 0.9351675169284979, 0.33416030903797916, 
//				0.21429218273891354, 0.8973129349502162, 0.22351689523027352, 
//				0.19301467627060448, 0.21190904562700863, 0.916717194564916, 
//				0.0520059318254596, 0.6567535114373174, 0.6401425510110789, 
//				0.7872488892434593, 0.19401460475170212, 0.3119356380521616, 
//				0.20288557707150656, 0.6599763985540407, 0.4567303445475498, 
//				0.07823546341066012, 0.32905115286980824, 0.9153500625036997, 
//				0.11688248790093958, 0.8067651109539006, 0.4686946499230985, 
//				0.7143548356595603, 0.8475276918563774, 0.8351082976202007, 
//				0.05899649367186417, 0.013820730879280636, 0.5246666847919966
//				};
//		solution.setVariableValue(0, 2);
		
		
		//Solution XXX TP20 BEST TradeOff :: 36.15006222684408 27.083125699281894
		
//		double [] values = {
//				0.3066881638020672, 0.3370231928384417, 0.9799343269124858, 
//				0.5030816848195909, 0.14089993401033574, 0.5029118886685525, 
//				0.62836098334026, 0.9492769202094852, 0.4707913607993258, 
//				0.09221006604961708, 0.47955814567481064, 0.3316364584320444, 
//				0.5861202358414598, 0.13495999050744723, 0.4818141216226708, 
//				0.9458699048550232, 0.9405030813034422, 0.9876238625568402, 
//				0.7956225389257195, 0.20804182502967736, 0.8743977833276487, 
//				0.2927362168535861, 0.30157728230873154, 0.2964979079022523, 
//				0.7535924159817613, 0.822401441942832, 0.4717514157994239, 
//				0.9601729200326716, 0.30153197419783473, 0.5100344846996205, 
//				0.9872048400958504, 0.2530520725385514, 0.3433419905384517, 
//				0.1098200224006855, 0.19782966427332013, 0.8697613066629674, 
//				0.7903232703794271, 0.660113419809689, 0.884952889493591, 
//				0.4949829230759851, 0.3946139533442622, 0.10033476131413421, 
//				0.07168470770897388, 0.20232334011657738, 0.977293688237023, 
//				0.6925687194159824, 0.1786932994682152, 0.8702363340544986, 
//				0.7804841473385411, 0.06495809087530988, 0.7445223634272784, 
//				0.010519507130842043, 0.230940642293193, 0.834494149356533, 
//				0.14599730689950624, 0.5910486772329477, 0.336376414556744, 
//				0.9092243636054663, 0.8876710629668296, 0.9190667454562687, 
//				0.9469163097319426, 0.2338424034307617, 0.8287971496947238, 
//				0.07892877776187418, 0.6344827744264042, 0.5624832276875983, 
//				0.8279012624147326, 0.1888899067068656, 0.851033692670041, 
//				0.4062790927572957, 0.5039898213826096, 0.4527118733659543, 
//				0.0562999324043958, 0.14636623151982076, 0.8877087276900912, 
//				0.6883774796242471, 0.8060984755784791, 0.289697265990756, 
//				0.36825878579430316, 0.25715221624096896, 0.8506826321410624, 
//				0.055596764428740154, 0.5505118098669882, 0.49769893152731964
//				};
//		solution.setVariableValue(0, 2);
		
		//Solution XXX TP20 BEST WOM :: 187.89381895895565 20.963242057213566
		
//		double [] values = {
//				0.3229991546456683, 0.35602002948496675, 0.85477017476216, 
//				0.5226392851989808, 0.9164891209579216, 0.41422014922400063, 
//				0.7042052887549184, 0.7057636210798632, 0.47671581775163613, 
//				0.506582071466292, 0.7018067259750429, 0.06658182248718522, 
//				0.618574133163087, 0.9721882349107851, 0.12964258209293997, 
//				0.9562947446672435, 0.48989433026445506, 0.3057653007301214, 
//				0.8557831599245193, 0.08410041351915126, 0.7242709523411186, 
//				0.1511124519819899, 0.9847900764889655, 0.03928598140590438, 
//				0.5688331251062931, 0.8201826613572253, 0.32135865215169807, 
//				0.1499004586514745, 0.1952248863370759, 0.28801609311243204, 
//				0.9421806129646036, 0.24139640187676015, 0.3903925723024307, 
//				0.0617946220999879, 0.19611496260282277, 0.2675699052219328, 
//				0.8755037892163616, 0.036342068249003934, 0.864418051762907, 
//				0.750723712940601, 0.5522285714981275, 0.09221126923482895, 
//				0.07266648833765996, 0.8080685448726418, 0.8680584421246998, 
//				0.3972924029247207, 0.9477449163056986, 0.9140952354635776, 
//				0.5439617689666756, 0.028595815567216947, 0.6759523461926806, 
//				0.978940253836407, 0.8154608728030499, 0.23738270238205766, 
//				0.3311609485817102, 0.6770454894578765, 0.34809965662047104, 
//				0.287963166326576, 0.9197363909820967, 0.8526292074808483, 
//				0.2022347600776157, 0.9411267125135729, 0.8489611712750652, 
//				0.19150373956901354, 0.6733618893593584, 0.5336150921716788, 
//				0.834403316646874, 0.21949105577010614, 0.4328771864870049, 
//				0.9093961723173922, 0.5364247314895522, 0.4482231302261764, 
//				0.8863274607787871, 0.332257344586079, 0.9180026149694687, 
//				0.09631828429214943, 0.927191789550061, 0.22241845933688142, 
//				0.20704689821343905, 0.769480498742402, 0.3987358279289737, 
//				0.022856613737503643, 0.1580274571430748, 0.5113173234447722
//				};
//		solution.setVariableValue(0, 2);
		
		
		//Solution XXX TP10 BEST AW :: 30.86955936328761 34.86793519708765
		
//		double [] values = {
//				0.09251774808978004, 0.15183573877073914, 0.3507878479241692, 
//				0.27757788306029485, 0.882221923165254, 0.6255859767972127, 
//				0.8943913229277466, 0.39236395392007234, 0.999392073370523, 
//				0.19269993522692, 0.6590287104944592, 0.711481761867696, 
//				0.5387027590500587, 0.19133556767045018, 0.5342636263375189, 
//				0.17025837206396258, 0.48790179407072176, 0.19572432652946462, 
//				0.1278945600226399, 0.7020546461651174, 0.6562101825605584, 
//				0.3172464067790818, 0.14969290110470898, 0.19185797848035152, 
//				0.02675551110885431, 0.4542951550941797, 0.5861053401166827, 
//				0.8047108043967752, 0.23789499505226688, 0.9604491660528567, 
//				0.6709902804942288, 0.2751710525167941, 0.09194795657469469, 
//				0.5628968152916498, 0.9332871818490254, 0.3234127897500432, 
//				0.1822549999083199, 0.6389821200208122, 0.9179937165721785, 
//				0.0543485850375768, 0.32775636382515594, 0.14185916878159527, 
//				0.010672416345009837, 0.06617987327042385, 0.8024722979433992, 
//				0.10018191240995991, 0.41050821627798534, 0.6866955445386485, 
//				0.011535517297341475, 0.8586296220682798, 0.6919374192492986, 
//				0.7954007834802382, 0.18155354547772493, 0.9453023770967988
//				};
//		solution.setVariableValue(0, 2);
		
		//Solution XXX TP10 BEST TradeOff :: 32.48633681134604 29.046132877681316
		
//		double [] values = {
//				0.01945584482707481, 0.023169541338894803, 0.5504225426090281, 
//				0.6177148055157052, 0.8898881823428569, 0.6827193589487652, 
//				0.8895635944171729, 0.866161016155099, 0.5083395885457925, 
//				0.2241195672166138, 0.6198081552101397, 0.7096446117713271, 
//				0.45534808509256874, 0.4351005012534578, 0.19379171429065375, 
//				0.5825697375885162, 0.1923025450560641, 0.7746993509550476, 
//				0.26522538925345496, 0.20199814878120523, 0.9286781592464141, 
//				0.3373986534529382, 0.279690993564758, 0.17135356633097049, 
//				0.10274148023621382, 0.21583487888986166, 0.48217056417704235, 
//				0.9729971943763355, 0.320679268114606, 0.23675168922006284, 
//				0.7065062398291528, 0.012212057264531673, 0.0556223548740383, 
//				0.7863862592844528, 0.9305136073828119, 0.371141607617837, 
//				0.4570446486642571, 0.32940880641584436, 0.22269772484712932, 
//				0.31427637497710775, 0.08210803353336417, 0.16058456741104987, 
//				0.007455534784038034, 0.5107419364202749, 0.5510152099096617, 
//				0.05461478465846729, 0.8672583365979157, 0.08137490314686419, 
//				0.7375789576061387, 0.5934424939200602, 0.39656813098405136, 
//				0.2273955489620273, 0.16735648913299978, 0.9496705680237298
//				};
//		solution.setVariableValue(0, 2);
		
		//Solution XXX TP10 BEST WOM :: 111.20835533991745 23.470823155814095
		
		double [] values = {
				0.017149016569752304, 0.19141369893861682, 0.5393624367483967, 
				0.22216025562959946, 0.8986749679890275, 0.6291064317753299, 
				0.4963948771142949, 0.4875606706538168, 0.5311251048917396, 
				0.6663236514370483, 0.6070346274456967, 0.6682798670735937, 
				0.2957880840723569, 0.12493524454001859, 0.5311579292091612, 
				0.10440219381236684, 0.9065564825668933, 0.26150889078829587, 
				0.5118099533388506, 0.568957353002894, 0.8524168558369132, 
				0.24213812122276882, 0.15920616293645562, 0.08464312593017054, 
				0.02462611238101836, 0.4602844023956839, 0.9066214342518442, 
				0.889239026596379, 0.28062853462123394, 0.25747320925422196, 
				0.7160438083786836, 0.22551477879810258, 0.14796189815009841, 
				0.7688500864348143, 0.9270993813192036, 0.28705903541024075, 
				0.32305575444582824, 0.5974566827936864, 0.29862184006264997, 
				0.0904306177271774, 0.17480446199471428, 0.28061709311836314, 
				0.014780130590744053, 0.4467181017285211, 0.5310038840694493, 
				0.1368992385714566, 0.8690783791942789, 0.6916344973441628, 
				0.015174119889401132, 0.6098997558195252, 0.4141250727139197, 
				0.1336984500978297, 0.14914626459728494, 0.9326809623536071
				};
		solution.setVariableValue(0, 2);
		
		for (int v=0; v<values.length; v++) {
			solution.setVariableValue(v+1, values[v]);
		}
				
		sproblem.evaluate(solution);
		
		ModelDefinition md = sproblem.getMD();
		
		StatisticsRecordingBean recordingBean = 
				calibrationConfig.getSimConfig().getStatisticRecordingConfiguration();
		
		MonteCarloStatistics stats = ModelRunner.simulateModel(
				md, calibrationConfig.getSimConfig().getnMC(), false, 
				recordingBean
			);
		
		
		SimulationResult newResult = new SimulationResult();
		
		newResult.loadValuesFromStatistics(
				stats,
					md.getAgentsRatio(),
							recordingBean,
							calibrationConfig.getSimConfig().getStatPeriod());
		
		String output = gson.toJson(newResult, SimulationResult.class);
		
		//Export to File
		FileWriter fw = new FileWriter(args[1]);
		fw.write(output);
		fw.close();
	}

}
